{"ast":null,"code":"var _jsxFileName = \"/home/asvin/workspace/react/router/src/components/Header.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { GoogleLogin, GoogleLogout } from 'react-google-login';\nimport { gapi } from 'gapi-script';\nimport { connect } from 'react-redux';\nimport { signin } from '../actions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Header(_ref) {\n  _s();\n  let {\n    posts,\n    signin\n  } = _ref;\n  console.log(posts.auth);\n  const [profile, setProfile] = useState([]);\n  const clientId = '1091196006174-27spvg8d6ktqsc6o1ilqlvttbuo2o3f2.apps.googleusercontent.com';\n  useEffect(() => {\n    // debugger;\n    const initClient = () => {\n      gapi.client.init({\n        clientId: clientId,\n        scope: ''\n      }).then(() => {\n        setTimeout(() => {\n          if (!gapi.auth2.getAuthInstance().isSignedIn.get()) {\n            // debugger;\n            signin(false, null, null);\n            setProfile(null);\n          }\n        }, 1000);\n        gapi.auth2.getAuthInstance();\n        // console.log(\n        //   'gapi.auth2.getAuthInstance().isSignedIn.get()',\n        //   gapi.auth2.getAuthInstance().isSignedIn.get()\n        // );\n        //if (!gapi.auth2.getAuthInstance().isSignedIn.get()) {\n        // signin(false, null, null);\n        // setProfile(null);\n        // } else {\n        // debugger;\n        // }\n      });\n    };\n\n    gapi.load('client:auth2', initClient);\n  }, []);\n  const onSuccess = res => {\n    debugger;\n    signin(true, res.profileObj.googleId, res.profileObj.email);\n    setProfile(res.profileObj);\n  };\n  const onFailure = err => {\n    debugger;\n    console.log('failed', err);\n  };\n  const logOut = () => {\n    // debugger;\n    debugger;\n    signin(false, null, null);\n    setProfile(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"React Google Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), profile && posts.auth.signin === true ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"User Logged in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(GoogleLogout, {\n        clientId: clientId,\n        buttonText: \"Log out\",\n        onLogoutSuccess: logOut\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(GoogleLogin, {\n      clientId: clientId,\n      buttonText: \"Sign in with Google\",\n      onSuccess: onSuccess,\n      onFailure: onFailure,\n      cookiePolicy: 'single_host_origin',\n      isSignedIn: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n_s(Header, \"XdmwkNwYRZKTOFPaLO6m8EXUpMA=\");\n_c = Header;\nconst mapStateToProps = state => {\n  return {\n    posts: state\n  };\n};\nexport default connect(mapStateToProps, {\n  signin\n})(Header);\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["React","useState","useEffect","GoogleLogin","GoogleLogout","gapi","connect","signin","Header","posts","console","log","auth","profile","setProfile","clientId","initClient","client","init","scope","then","setTimeout","auth2","getAuthInstance","isSignedIn","get","load","onSuccess","res","profileObj","googleId","email","onFailure","err","logOut","mapStateToProps","state"],"sources":["/home/asvin/workspace/react/router/src/components/Header.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { GoogleLogin, GoogleLogout } from 'react-google-login';\nimport { gapi } from 'gapi-script';\nimport { connect } from 'react-redux';\nimport { signin } from '../actions';\n\nfunction Header({ posts, signin }) {\n  console.log(posts.auth);\n  const [profile, setProfile] = useState([]);\n  const clientId =\n    '1091196006174-27spvg8d6ktqsc6o1ilqlvttbuo2o3f2.apps.googleusercontent.com';\n  useEffect(() => {\n    // debugger;\n    const initClient = () => {\n      gapi.client\n        .init({\n          clientId: clientId,\n          scope: '',\n        })\n        .then(() => {\n          setTimeout(() => {\n            if (!gapi.auth2.getAuthInstance().isSignedIn.get()) {\n              // debugger;\n              signin(false, null, null);\n              setProfile(null);\n            }\n          }, 1000);\n          gapi.auth2.getAuthInstance();\n          // console.log(\n          //   'gapi.auth2.getAuthInstance().isSignedIn.get()',\n          //   gapi.auth2.getAuthInstance().isSignedIn.get()\n          // );\n          //if (!gapi.auth2.getAuthInstance().isSignedIn.get()) {\n          // signin(false, null, null);\n          // setProfile(null);\n          // } else {\n          // debugger;\n          // }\n        });\n    };\n    gapi.load('client:auth2', initClient);\n  }, []);\n\n  const onSuccess = (res) => {\n    debugger;\n    signin(true, res.profileObj.googleId, res.profileObj.email);\n    setProfile(res.profileObj);\n  };\n\n  const onFailure = (err) => {\n    debugger;\n    console.log('failed', err);\n  };\n\n  const logOut = () => {\n    // debugger;\n    debugger;\n    signin(false, null, null);\n    setProfile(null);\n  };\n\n  return (\n    <div>\n      <h2>React Google Login</h2>\n      <br />\n      <br />\n      {profile && posts.auth.signin === true ? (\n        <div>\n          <h3>User Logged in</h3>\n\n          <GoogleLogout\n            clientId={clientId}\n            buttonText=\"Log out\"\n            onLogoutSuccess={logOut}\n          />\n        </div>\n      ) : (\n        <GoogleLogin\n          clientId={clientId}\n          buttonText=\"Sign in with Google\"\n          onSuccess={onSuccess}\n          onFailure={onFailure}\n          cookiePolicy={'single_host_origin'}\n          isSignedIn={true}\n        />\n      )}\n    </div>\n  );\n}\nconst mapStateToProps = (state) => {\n  return { posts: state };\n};\n\nexport default connect(mapStateToProps, { signin })(Header);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}